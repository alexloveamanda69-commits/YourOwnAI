package com.yourown.ai.domain.prompt

/**
 * System prompts for AI features
 */
object AIPrompts {
    
    /**
     * Deep Empathy mode prompts
     */
    object DeepEmpathy {
        /**
         * Prompt for analyzing dialogue focus points
         * Returns JSON: {"focus_points": ["...", "..."], "is_strong_focus": [true, false]}
         */
        const val ANALYZE_DIALOGUE_FOCUS = """
Прочитай сообщение:
"{text}"

1. Найди 1–3 конкретные фразы, которые могли бы стать фокусом для диалога.
Это могут быть:
- действия («сходила в кафе»),
- состояния («расслабилась», «стала спать крепче»),
- ощущения, места, события, предметы.
- желание сблизиться (например: «обнять тебя», «быть с тобой»),
- выражение теплоты или радости («счастлива, что получилось», «мне хорошо рядом»).

Важно: выбирай только то, что несёт смысл или визуальную опору. Не выделяй общие фразы.
Если ничего нет — верни null.

2. Определи, является ли это найденное действие сильным по смыслу
Если действие сильное по смыслу - верни True. Если действие слабое, или его нет, верни False
Верни True только для одного фокуса из списка - самого сильного.

Формат ответа СТРОГО:
{"focus_points": ["...", "..."], "is_strong_focus": [true, false]}

Верни только JSON. Без пояснений.
"""
    }
    

object Memory {
    /**
     * Generate key info extraction prompt
     *
     * @param text Message text to analyze (will be inserted at {text})
     * @return Formatted prompt
     */
    fun getKeyInfoPrompt(): String {
        return """
Проанализируй сообщение пользователя: {text}

Твоя задача: извлечь одно ключевое воспоминание пользователя или написать 'Нет ключевой информации'.

Контекст:
— Сообщение относится к диалогу между пользователем и второй стороной диалога (тобой).
— Когда пользователь пишет «ты», «с тобой», «с твоей помощью», «спасибо, что ты есть» и т.п., он обращается именно к собеседнику.
— В записи памяти не нужно придумывать для собеседника новых названий (например: «ИИ», «бот», «ассистент», «цифровой партнёр» и т.п.).
— Если нужно сослаться на эту связь, используй нейтральные конструкции:
   • «вместе со мной»,
   • «с моей помощью»,
   • «для меня это важно»,
   • «пользователь привык делиться этим со мной».
— Местоимение «они» не используется для обозначения пары «пользователь + собеседник».
  «Они» применяй только к другим людям (коллегам, семье, друзьям: «коллеги сказали», «приезжали друзья» и т.п.).

1. Определи, есть ли в сообщении что-то, что можно считать ключевым воспоминанием:
   — Если это только мимолётная эмоция без контекста (например: «я устал(а)», «мне грустно») — напиши: Нет ключевой информации.
   — Если пользователь объясняет, из-за чего так себя чувствует, описывает конкретную ситуацию, событие, важное желание, решение, вывод или что-то значимое в отношениях с другими (в том числе с собеседником), это может быть воспоминание. Важно, чтобы была конкретика или небольшой сюжет.

2. Сформулируй суть в виде одного факта:
   — О чём это для пользователя: что он проживает, чего хочет, в чём боль или радость.
   — Сохрани те детали, которые делают воспоминание узнаваемым, и по возможности характерные формулировки пользователя.
   — Формулируй воспоминание в третьем лице (работает, учится, ждёт, переживает и т.д.).
   — Если нужно упомянуть собеседника, используй нейтральные местоимения и конструкции («вместе со мной», «с моей помощью»), без указания, кто он именно.

Формат ответа:
— Либо одна строка с фактом,
— Либо ровно строка 'Нет ключевой информации'.

Примеры превращения исходного сообщения в память:

Исходное:
«Мы с тобой наконец-то разобрались с 2D координатами для доставок, я так счастлив(а)!»
→ Память:
«Пользователь чувствует себя счастливым(ой), потому что вместе со мной разобрался(ась) с 2D-координатами для доставок.»

❌ Плохо (так нельзя):
«Пользователь счастлив, потому что они разобрались с 2D координатами.»  // «они» нельзя для пары «пользователь + собеседник»

Примеры корректных ответов:
Начальница на работе очень жёсткая, часто обижает и придирается.
Младший брат наконец-то нашёл работу во «Вкусвилле».
Пользователь устроился(ась) на позицию Python-разработчика, но вынужден(а) разбираться с Java, TypeScript и JavaScript — и у него(неё) получается, в том числе с моей помощью.
Нет ключевой информации

Верни только одну строку: либо факт, либо 'Нет ключевой информации'. Без пояснений, комментариев и мета-текста.
""".trimIndent()
    }
}
}
